<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Stickman Runner</title>
<style>
body {
margin:0;
background:#111;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

canvas{
background:#222;
border-radius:12px;
}
</style>
</head>

<body>

<canvas id="game" width="900" height="300"></canvas>

<script>
const c = document.getElementById("game");
const ctx = c.getContext("2d");

let ground = 240;
let y = ground;
let vy = 0;
let gravity = 0.7;
let jumping = false;

let obstacles=[];
let speed=5;
let score=0;
let frame=0;
let gameOver=false;

function jump(){
if(!jumping){
vy=-14;
jumping=true;
}
}

document.addEventListener("keydown",e=>{
if(e.code==="Space") jump();
if(gameOver && e.code==="Enter") reset();
});

c.addEventListener("touchstart",jump);

function reset(){
obstacles=[];
speed=5;
score=0;
frame=0;
y=ground;
vy=0;
gameOver=false;
loop();
}

function drawStickman(x,y,run){
ctx.strokeStyle="white";
ctx.lineWidth=3;

// head
ctx.beginPath();
ctx.arc(x,y-45,10,0,Math.PI*2);
ctx.stroke();

// body
ctx.beginPath();
ctx.moveTo(x,y-35);
ctx.lineTo(x,y-10);
ctx.stroke();

// arms
let a=Math.sin(run)*10;
ctx.beginPath();
ctx.moveTo(x,y-30);
ctx.lineTo(x-10,y-20+a);
ctx.moveTo(x,y-30);
ctx.lineTo(x+10,y-20-a);
ctx.stroke();

// legs
ctx.beginPath();
ctx.moveTo(x,y-10);
ctx.lineTo(x-8,y+a);
ctx.moveTo(x,y-10);
ctx.lineTo(x+8,y-a);
ctx.stroke();
}

function spawn(){
obstacles.push({x:900,w:20,h:40});
}

function loop(){
if(gameOver)return;

ctx.clearRect(0,0,900,300);

// ground
ctx.strokeStyle="#555";
ctx.beginPath();
ctx.moveTo(0,ground+10);
ctx.lineTo(900,ground+10);
ctx.stroke();

// physics
vy+=gravity;
y+=vy;
if(y>=ground){
y=ground;
vy=0;
jumping=false;
}

// stickman
drawStickman(100,y,frame*0.3);

// obstacles
if(frame%90===0)spawn();

for(let o of obstacles){
o.x-=speed;
ctx.fillStyle="#0f0";
ctx.fillRect(o.x,ground-o.h,o.w,o.h);

// collision
if(o.x<110 && o.x+o.w>90 && y>ground-o.h){
gameOver=true;
}
}

obstacles=obstacles.filter(o=>o.x>-30);

// score
score+=0.02;
speed+=0.0005;

ctx.fillStyle="white";
ctx.font="16px Arial";
ctx.fillText("Score: "+Math.floor(score),20,25);

// game over
if(gameOver){
ctx.fillStyle="red";
ctx.font="32px Arial";
ctx.fillText("GAME OVER",350,130);
ctx.font="16px Arial";
ctx.fillText("Press ENTER to restart",360,170);
return;
}

frame++;
requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
